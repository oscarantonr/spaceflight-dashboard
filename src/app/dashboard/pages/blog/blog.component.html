<app-title [title]="blog()?.title"></app-title>
@if(blog()) {
<section class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <div class="md:col-span-2 lg:col-span-2">
    <div class="my-4 mx-4 block p-4 bg-slate-200 shadow rounded-xl">
      <img
        [srcset]="blog()!.image_url"
        [alt]="blog()!.title"
        class="md:w-full lg:w-[100%] h-auto object-cover mt-2 rounded-xl"
      />
      <p class="mt-2 text-gray-400">
        Published at: {{ blog()!.published_at | date : "dd/MM/yyyy HH:mm" }}
      </p>
      <p class="mt-2 text-black-300">
        {{ blog()!.summary }}
      </p>

      <div class="flex justify-between mt-4">
        @if(currentIndex > 0){
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded-md"
          (click)="goToPreviousBlog()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 md:hidden"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"
            />
          </svg>
          <span class="hidden md:block">Previous blog</span>
        </button>
        } @if (currentIndex < blogs.length - 1 ) {
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded-md"
          (click)="goToNextBlog()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 md:hidden"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"
            />
          </svg>
          <span class="hidden md:block">Previous blog</span>
        </button>
        }
      </div>
    </div>
  </div>
  <div class="md:col-span-1">
    <div class="my-4 mx-4 block p-4 bg-slate-200 shadow rounded-xl">
      <h2 class="text-xl font-bold mb-4">Available Blogs</h2>
      @for(item of blogs; track $index) {
      <div
        class="mb-4 p-2 hover:bg-slate-300 rounded-lg cursor-pointer"
        [class.bg-slate-300]="item.id === blog()?.id"
        (click)="goToBlog(item.id)"
        [routerLink]="['/dashboard/blog', item.id]"
      >
        <h3 class="font-semibold">{{ item.title }}</h3>
        <p class="text-sm text-gray-600">
          {{ item.published_at | date : "dd/MM/yyyy" }}
        </p>
      </div>
      }
    </div>
  </div>
</section>
} @else {
<section>
  <div class="flex items-center justify-center h-96">
    <p class="text-2xl text-gray-400">No blogs found</p>
  </div>
</section>
}
